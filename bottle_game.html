<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Clean Nature Game</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
  <style>
    body {
      margin: 0;
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
  </style>
</head>
<body>

<script>
class GameScene extends Phaser.Scene {
  constructor() {
    super('GameScene');
  }

  preload() {}

  create() {
    this.createNatureBackground();
    this.makePlayerTexture();
    this.makeBottleTextures();

    this.platforms = this.physics.add.staticGroup();

    // Ground
    const ground = this.add.graphics();
    ground.fillStyle(0x5d4037, 1);
    ground.fillRect(0, 660, 1200, 40);
    ground.fillStyle(0x43a047, 1);
    ground.fillRect(0, 640, 1200, 20);
    this.physics.add.existing(ground, true);
    this.platforms.add(ground);

    // Player
    this.player = this.physics.add.sprite(100, 500, 'player');
    this.player.setBounce(0.1);
    this.player.setCollideWorldBounds(true);

    this.physics.add.collider(this.player, this.platforms);

    // Bottles
    this.bottles = this.physics.add.group();
    const positions = [
      [300, 580], [500, 580], [700, 580],
      [900, 580], [600, 300], [400, 350]
    ];

    positions.forEach(p => {
      const bottle = this.bottles.create(p[0], p[1], 'glass');
      bottle.setBounceY(Phaser.Math.FloatBetween(0.2, 0.4));
    });

    this.physics.add.collider(this.bottles, this.platforms);
    this.physics.add.overlap(
      this.player,
      this.bottles,
      this.collectBottle,
      null,
      this
    );

    // Input
    this.cursors = this.input.keyboard.createCursorKeys();

    // Score
    this.score = 0;
    this.scoreText = this.add.text(20, 20, 'Glass Collected: 0', {
      fontSize: '20px',
      fill: '#ffffff'
    }).setScrollFactor(0);
  }

  update() {
    if (this.cursors.left.isDown) {
      this.player.setVelocityX(-200);
    } else if (this.cursors.right.isDown) {
      this.player.setVelocityX(200);
    } else {
      this.player.setVelocityX(0);
    }

    if (this.cursors.up.isDown && this.player.body.touching.down) {
      this.player.setVelocityY(-420);
    }
  }

  collectBottle(player, bottle) {
    bottle.disableBody(true, true);
    this.score++;
    this.scoreText.setText('Glass Collected: ' + this.score);
  }

  createNatureBackground() {
    const bg = this.add.graphics();
    bg.fillGradientStyle(
      0x6ec6ff, 0x6ec6ff,
      0xb3e5fc, 0xb3e5fc, 1
    );
    bg.fillRect(0, 0, 1200, 700);

    // Hills
    const hills = this.add.graphics();
    hills.fillStyle(0x81c784, 1);
    hills.fillEllipse(200, 520, 500, 200);
    hills.fillEllipse(600, 550, 600, 240);
    hills.fillEllipse(1000, 520, 500, 200);

    // Clouds
    for (let i = 0; i < 6; i++) {
      const x = Phaser.Math.Between(100, 1100);
      const y = Phaser.Math.Between(60, 200);
      const cloud = this.add.container(x, y);
      cloud.add(this.add.circle(0, 0, 28, 0xffffff, 0.8));
      cloud.add(this.add.circle(25, 5, 22, 0xffffff, 0.8));
      cloud.add(this.add.circle(-25, 5, 22, 0xffffff, 0.8));
    }

    this.add.circle(1000, 100, 45, 0xffeb3b, 0.9);
  }

  makePlayerTexture() {
    const g = this.make.graphics({ add: false });

    g.fillStyle(0x1976d2, 1);
    g.fillRoundedRect(10, 30, 30, 35, 6);

    g.fillStyle(0x0d47a1, 1);
    g.fillRect(12, 65, 10, 15);
    g.fillRect(28, 65, 10, 15);

    g.fillStyle(0xffccbc, 1);
    g.fillCircle(25, 15, 12);

    g.fillStyle(0x000000, 1);
    g.fillCircle(20, 14, 2);
    g.fillCircle(30, 14, 2);

    g.lineStyle(2, 0x000000);
    g.beginPath();
    g.arc(25, 18, 6, 0, Math.PI);
    g.strokePath();

    g.generateTexture('player', 50, 85);
    g.destroy();
  }

  makeBottleTextures() {
    const g = this.make.graphics({ add: false });

    g.fillStyle(0xb3e5fc, 0.8);
    g.fillRoundedRect(4, 10, 22, 40, 6);

    g.fillRoundedRect(10, 0, 10, 10, 3);

    g.fillStyle(0xffffff, 0.4);
    g.fillRect(8, 14, 4, 28);

    g.fillStyle(0x8d6e63, 1);
    g.fillRect(10, -4, 10, 4);

    g.generateTexture('glass', 30, 50);
    g.destroy();
  }
}

const config = {
  type: Phaser.AUTO,
  width: 1200,
  height: 700,
  physics: {
    default: 'arcade',
    arcade: {
      gravity: { y: 800 },
      debug: false
    }
  },
  scene: GameScene
};

new Phaser.Game(config);
</script>

</body>
</html>
